<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Connexion - SportConnect</title>

		<!-- Font Awesome pour les icônes -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		/>
		<script src="js/main.js"></script>
		<style>
			/* Reprise des variables et styles de base de votre CSS principal */
			:root {
				--header-bg: rgba(255, 255, 255, 0.9);
				--header-height: 4rem;
				--header-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
				--text-color-dark: #1f2937;
				--text-color-medium: #4b5563;
				--text-color-light: #9ca3af;
				--brand-color: #4f46e5;
				--brand-color-hover: #4338ca;
				--hover-bg-light: #f3f4f6;
				--container-padding: 1rem;
				--body-bg: #f9fafb; /* Correspond à slate-50 */
				--card-bg: white;
				--card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
					0 2px 4px -2px rgba(0, 0, 0, 0.1);
				--input-border: #d1d5db; /* Correspond à slate-300 */
				--success-color: #16a34a; /* green-600 */
				--error-color: #dc2626; /* red-600 */
			}

			body {
				display: flex;
				align-items: center;
				justify-content: center;
				min-height: 100vh;
				font-family: sans-serif;
				margin: 0;
				background-color: var(--body-bg);
			}

			/* Conteneur principal pour la carte de connexion */
			.login-container {
				width: 100%;
				max-width: 420px;
				padding: 2rem;
			}

			/* La carte de connexion */
			.login-card {
				background-color: var(--card-bg);
				padding: 2.5rem;
				border-radius: 0.75rem;
				box-shadow: var(--card-shadow);
			}

			.login-header {
				text-align: center;
				margin-bottom: 2rem;
			}

			.login-header h1 {
				font-size: 1.875rem;
				font-weight: 700;
				color: var(--text-color-dark);
				margin: 0;
			}

			.login-header p {
				margin-top: 0.5rem;
				color: var(--text-color-medium);
			}

			/* Style des champs du formulaire */
			.form-group {
				margin-bottom: 1.5rem;
			}

			.form-group label {
				display: block;
				font-weight: 500;
				color: var(--text-color-dark);
				margin-bottom: 0.5rem;
			}

			.form-group input {
				width: 100%;
				padding: 0.75rem 1rem;
				border: 1px solid var(--input-border);
				border-radius: 0.375rem;
				font-size: 1rem;
				box-sizing: border-box; /* Important pour que le padding ne casse pas la largeur */
			}

			.form-group input:focus {
				outline: 2px solid transparent;
				outline-offset: 2px;
				border-color: var(--brand-color);
				box-shadow: 0 0 0 2px var(--brand-color);
			}

			/* Bouton de soumission */
			.submit-btn {
				width: 100%;
				padding: 0.75rem 1rem;
				border: none;
				border-radius: 0.375rem;
				background-color: var(--brand-color);
				color: white;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition: background-color 0.2s;
			}

			.submit-btn:hover {
				background-color: var(--brand-color-hover);
			}

			/* Conteneur pour les messages d'erreur/succès */
			#message-container {
				margin-top: 1.5rem;
				padding: 1rem;
				border-radius: 0.375rem;
				text-align: center;
				font-weight: 500;
				display: none; /* Caché par défaut */
			}
			#message-container.success {
				background-color: #d1fae5; /* green-100 */
				color: var(--success-color);
				display: block;
			}
			#message-container.error {
				background-color: #fee2e2; /* red-100 */
				color: var(--error-color);
				display: block;
			}
		</style>
	</head>
	<body>
		<main class="login-container">
			<div class="login-card">
				<div class="login-header">
					<h1>Connexion</h1>
					<p>Accédez à votre compte SportConnect</p>
				</div>
				<form id="login-form">
					<div class="form-group">
						<label for="email">Adresse e-mail</label>
						<input type="email" id="email" name="email" required />
					</div>
					<div class="form-group">
						<label for="password">Mot de passe</label>
						<input type="password" id="password" name="password" required />
					</div>
					<button type="submit" class="submit-btn">Se connecter</button>
				</form>
				<div id="message-container"></div>
			</div>
		</main>

		<script>


			// --- Logique du formulaire ---
			document.addEventListener("DOMContentLoaded", () => {

		// const userName = `user${Date.now()}`;
		 api.login("clavier.jeremy@gmail.com", "Password123456!")
			.then((user) => {
				console.log("Inscription réussie :", user);
			})
			.catch((error) => {
				console.error("Erreur lors de l'inscription :", error);
			});


				const loginForm = document.getElementById("login-form");
				const messageContainer = document.getElementById("message-container");

				loginForm.addEventListener("submit", async (event) => {
					event.preventDefault(); // Empêche le rechargement de la page

					// Récupération des valeurs
					const email = event.target.email.value;
					const password = event.target.password.value;

					// Réinitialisation des messages
					messageContainer.textContent = "";
					messageContainer.className = "";

					try {
						// Appel de l'API simulée
						const userData = await api.login(email, password);

						// Stockage des données dans le localStorage
						localStorage.setItem("userData", JSON.stringify(userData));

						// Affichage du message de succès
						messageContainer.textContent = "Connexion réussie ! Redirection...";
						messageContainer.classList.add("success");

						// Redirection vers la page d'accueil après 2 secondes
						setTimeout(() => {
							window.location.href = "/";
						}, 2000);
					} catch (error) {
						// Affichage du message d'erreur
						messageContainer.textContent = error.message;
						messageContainer.classList.add("error");
					}
				});
			});
		</script>
	</body>
</html>
